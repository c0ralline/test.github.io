# vim

使用vim中的替换和正则表达式，快速完成module例化格式调整

### 1.插入标记mark

在gvim普通模式下，将光标移动到module定义第一行，敲击```ma```(不使用命令模式)，标记指定行为a.

在module定义最后一行，敲击```mb```，创建标记b

### 2.在所有，后插入换行

```shell
:'a,'bs?,?,\n?g
```
'a,'b表示指定在mark-a和mark-b之间进行操作

### 3.删除空格与空行

删除空格：

```shell
:'a,'bs?\s??g
```

删除空行：(将连续的两个换行符替换为一个，匹配换行符使用\n,插入换行符使用\r)

```shell
:'a,'bs?\n\n?\r?g
```

### 4.进行例化

```shell
:'a,'bs?\(.*\),?.\1(\1),?g
```

其中```\(\)```表示选中内容，```\1```表示调用选中内容

由于最后一个信号后没有，不能进行匹配，需要手动添加例化信号。

例如，对于以下

```verilog

module test (a1,a2,a3,b1,b2,b3,x1,x2,x3,z);

```

实现如下效果

```verilog

module test (
.a1(a1),
.a2(a2),
.a3(a3),
.b1(b1),
.b2(b2),
.b3(b3),
.x1(x1),
.x2(x2),
.x3(x3),
.z(z)
);

```
## :s 替换
#### 删除1到100行的5到8列
```
:1,100s/\%5c...//
```
\%5c: 匹配第五列，但未选中

...:  匹配三个字符，也就是5，6，7列

#### 删除包含“word”的行
```
:g/word/d
```
g: 匹配指定行

d: 删除

#### 删除不包含“word”的行
```
:g!/word/d
```
g!: 不匹配指定行

d: 删除

#### 在包含“word”的行首插入字符“aaa”
```
:g/word/s/^/aaa/
```
^:匹配行首
